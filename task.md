# Mobile Responsiveness

- [x] Create Implementation Plan <!-- id: 16 -->
- [x] HTML: Update Meta & Add Mobile Controls <!-- id: 17 -->
- [x] CSS: Responsive Layouts & Bottom Sheet <!-- id: 18 -->
- [x] JS: Touch Events (Pan, Select, Pinch) <!-- id: 19 -->
- [x] Verify on Mobile <!-- id: 20 -->

# Scalability & Performance ‚≠êÔ∏è
- [x] **Backend Chunking API**: Create `/api/chunks` or `/api/pixels?bounds=...` to load only visible area.
- [x] **Frontend Chunk Manager**: Implement `ChunkManager` to dynamically load/unload pixels.
- [x] **Database Optimization**: Enable SQLite WAL mode & Add Indexes (x, y).
- [ ] **(Optional) DB Migration**: Guide user to install PostgreSQL if SQLite limits are reached.

# Advanced Rendering Optimization üöÄ
- [x] **Offscreen Canvas Caching**: Pre-render chunks to images to avoid `fillRect` loops.
- [x] **Cluster Logic Separation**: Move `recalculateClusters` out of render loop; only run on data updates.
- [x] **Text LOD**: Hide text at low zoom; optimize style changes.
- [x] **Text LOD**: Hide text at low zoom; optimize style changes.
- [x] **Strict Culling**: Prevent rendering logic for invisible chunks.
- [x] **Debugging**: Fix Missing Content & Rendering Issues (Resolved blank canvas, transparent pixels, and data type errors).
- [x] **Feature: Notice Modal**
  - [x] Add Notice button to `index.html`.
  - [x] Create Notice modal structure in `index.html`.
  - [x] Implement toggle logic in `main.js`.
- [x] **Feature: Dynamic Pricing**
  - [x] Implement `getPixelPrice` in `server.js` and `main.js`.
  - [x] Update frontend to calculate total price during selection.
  - [x] Update backend to validate price during purchase (if applicable) or ensure correct amount is passed.
  - [x] Draw visual guide for high-value zones on canvas.
- [ ] **Deployment: Fix Google OAuth**
  - [ ] Update `server.js` to strictly checking `callbackURL` from env.
  - [ ] Document Redirect URIs for user.
- [ ] **Mobile UX: Touch Sensitivity**
  - [x] Reduce Long Press Duration to 0.15s.
- [x] **UI: Sort Idol List**
  - [x] Sort dropdown alphabetically (ABC).
- [x] **Feature: Purchase Share Card**
  - [x] Add Share Modal to `index.html`.
  - [x] Implement `generateShareCard` logic in `main.js` (Canvas Compostion).
  - [x] Trigger on purchase success.
- [x] **Feature: Activity Ticker**
  - [x] Add Ticker UI to `index.html`.
  - [x] Implement socket listener for `batch_pixel_update`.
  - [x] Display real-time purchase alerts.
- [x] **UI: Notice Modal Refactor**
  - [x] Split into Tabs (Intro / Process).
  - [x] Update Donation Process content.
- [x] **Feature: Internationalization (i18n)**
  - [x] Create `ko.json` and `en.json`.
  - [x] Add Language Switcher to `index.html`.
  - [x] Implement text replacement logic in `main.js`.
  - [x] Apply localization to Share Card and Ticker.
- [x] **Optimization: Rendering & Data**
  - [x] Implement Offscreen Canvas for static drawing.
  - [x] Apply Integer Coordinates (Math.round) in draw loop.
  - [x] Optimize Data Fetching (AbortController, Cache).
- [x] **Diagnostic: FPS Meter**
  - [x] Add real-time FPS display to client.
  - [x] (Revert) Remove FPS meter as per request.
- [x] **Optimization: Data & Network**
  - [x] Implement Binary Protocol for pixel chunks (Buffer vs JSON).
  - [x] (Revert) Remove LOD Thumbnail due to blocking UX.
  - [x] Restore Dynamic Pricing (Center 2000 / Mid 1000 / Rest 500).
  - [x] Support dual currency display (KRW/USD).
- [x] **Configuration: Payment Channels**
  - [x] Set up Toss Payments (KO) and PayPal (EN) channel keys.
  - [x] Implement locale-based channel switching.
  - [x] Fix PayPal Helper Error (Amount Type / Method).
  - [x] **PayPal Fix**: Force Integer USD and Explicit PAYPAL method.
- [x] **Feature: Refund Policy**
  - [x] Add "Refund Policy" tab to Notice Modal.
  - [x] Implement localization for Refund Policy (KO/EN).
- [x] **Fix: Initial Rendering & UX**
  - [x] Add "Loading Pixels..." indicator.
  - [x] Force `draw()` after initial data load and `fitToScreen`.
  - [x] Ensure viewport calculation works without user input.
- [x] **Performance Optimization**
  - [x] Install `compression` middleware (Gzip).
- [x] **Mobile UX Improvements**
  - [x] Prevent pixel click/selection during multi-touch (pinch/zoom).
  - [x] Increase maximum zoom-out range (lower minimum scale).
- [x] **Feature: Contact Footer**
  - [x] Add contact email to site footer.
